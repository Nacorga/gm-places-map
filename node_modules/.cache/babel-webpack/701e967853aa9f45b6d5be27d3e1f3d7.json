{"ast":null,"code":"import { PlaceEditorDialogComponent } from 'src/app/dialogs/place-editor-dialog/place-editor-dialog.component';\nimport { Place } from 'src/app/models/place.model';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/markers/markers.service\";\nimport * as i2 from \"src/app/services/places/places.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"../../components/gm-autocomplete/gm-autocomplete.component\";\nimport * as i5 from \"../../components/places-list/places-list.component\";\nimport * as i6 from \"@angular/common\";\n\nconst _c0 = function () {\n  return [];\n};\n\nexport class PlacesViewComponent {\n  constructor(markersSrv, placesSrv, dialog) {\n    this.markersSrv = markersSrv;\n    this.placesSrv = placesSrv;\n    this.dialog = dialog;\n    this.$places = this.placesSrv.$places;\n  }\n\n  handlePlace(place) {\n    this.markersSrv.addMarker(place);\n    this.placesSrv.addPlace(new Place(place));\n  }\n\n  editPlace(idx) {\n    this.openPlaceEditor(idx);\n  }\n\n  removeItems(idx) {\n    this.placesSrv.removePlace(idx);\n    this.markersSrv.removeMarker(idx);\n  }\n\n  openPlaceEditor(placeIdx) {\n    const {\n      formatted_address,\n      customTitle\n    } = this.placesSrv.places[placeIdx];\n    this.dialog.open(PlaceEditorDialogComponent, {\n      data: {\n        placeIdx,\n        customTitle: customTitle || formatted_address\n      }\n    }).afterClosed().pipe(filter(res => !!res)).subscribe(res => {\n      this.placesSrv.updatePlaceTitle(placeIdx, res);\n    });\n  }\n\n}\n\nPlacesViewComponent.ɵfac = function PlacesViewComponent_Factory(t) {\n  return new (t || PlacesViewComponent)(i0.ɵɵdirectiveInject(i1.MarkersService), i0.ɵɵdirectiveInject(i2.PlacesService), i0.ɵɵdirectiveInject(i3.MatDialog));\n};\n\nPlacesViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PlacesViewComponent,\n  selectors: [[\"app-places-view\"]],\n  decls: 6,\n  vars: 4,\n  consts: [[1, \"places-view\"], [1, \"places-view__header\"], [3, \"placeChange\"], [1, \"places-view__list\"], [3, \"places\", \"edit\", \"remove\"]],\n  template: function PlacesViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"app-gm-autocomplete\", 2);\n      i0.ɵɵlistener(\"placeChange\", function PlacesViewComponent_Template_app_gm_autocomplete_placeChange_2_listener($event) {\n        return ctx.handlePlace($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"app-places-list\", 4);\n      i0.ɵɵlistener(\"edit\", function PlacesViewComponent_Template_app_places_list_edit_4_listener($event) {\n        return ctx.editPlace($event);\n      })(\"remove\", function PlacesViewComponent_Template_app_places_list_remove_4_listener($event) {\n        return ctx.removeItems($event);\n      });\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      let tmp_0_0;\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"places\", (tmp_0_0 = i0.ɵɵpipeBind1(5, 1, ctx.$places)) !== null && tmp_0_0 !== undefined ? tmp_0_0 : i0.ɵɵpureFunction0(3, _c0));\n    }\n  },\n  directives: [i4.GmAutocompleteComponent, i5.PlacesListComponent],\n  pipes: [i6.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwbGFjZXMtdmlldy5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/nacho/Desktop/projects/medium/google-maps/src/app/views/places-view/places-view.component.ts"],"names":["PlaceEditorDialogComponent","Place","filter","i0","i1","i2","i3","i4","i5","i6","_c0","PlacesViewComponent","constructor","markersSrv","placesSrv","dialog","$places","handlePlace","place","addMarker","addPlace","editPlace","idx","openPlaceEditor","removeItems","removePlace","removeMarker","placeIdx","formatted_address","customTitle","places","open","data","afterClosed","pipe","res","subscribe","updatePlaceTitle","ɵfac","PlacesViewComponent_Factory","t","ɵɵdirectiveInject","MarkersService","PlacesService","MatDialog","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PlacesViewComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","PlacesViewComponent_Template_app_gm_autocomplete_placeChange_2_listener","$event","ɵɵelementEnd","PlacesViewComponent_Template_app_places_list_edit_4_listener","PlacesViewComponent_Template_app_places_list_remove_4_listener","ɵɵpipe","tmp_0_0","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","undefined","ɵɵpureFunction0","directives","GmAutocompleteComponent","PlacesListComponent","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { PlaceEditorDialogComponent } from 'src/app/dialogs/place-editor-dialog/place-editor-dialog.component';\nimport { Place } from 'src/app/models/place.model';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/markers/markers.service\";\nimport * as i2 from \"src/app/services/places/places.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"../../components/gm-autocomplete/gm-autocomplete.component\";\nimport * as i5 from \"../../components/places-list/places-list.component\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = function () { return []; };\nexport class PlacesViewComponent {\n    constructor(markersSrv, placesSrv, dialog) {\n        this.markersSrv = markersSrv;\n        this.placesSrv = placesSrv;\n        this.dialog = dialog;\n        this.$places = this.placesSrv.$places;\n    }\n    handlePlace(place) {\n        this.markersSrv.addMarker(place);\n        this.placesSrv.addPlace(new Place(place));\n    }\n    editPlace(idx) {\n        this.openPlaceEditor(idx);\n    }\n    removeItems(idx) {\n        this.placesSrv.removePlace(idx);\n        this.markersSrv.removeMarker(idx);\n    }\n    openPlaceEditor(placeIdx) {\n        const { formatted_address, customTitle } = this.placesSrv.places[placeIdx];\n        this.dialog\n            .open(PlaceEditorDialogComponent, {\n            data: {\n                placeIdx,\n                customTitle: customTitle || formatted_address,\n            },\n        })\n            .afterClosed()\n            .pipe(filter((res) => !!res))\n            .subscribe((res) => {\n            this.placesSrv.updatePlaceTitle(placeIdx, res);\n        });\n    }\n}\nPlacesViewComponent.ɵfac = function PlacesViewComponent_Factory(t) { return new (t || PlacesViewComponent)(i0.ɵɵdirectiveInject(i1.MarkersService), i0.ɵɵdirectiveInject(i2.PlacesService), i0.ɵɵdirectiveInject(i3.MatDialog)); };\nPlacesViewComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PlacesViewComponent, selectors: [[\"app-places-view\"]], decls: 6, vars: 4, consts: [[1, \"places-view\"], [1, \"places-view__header\"], [3, \"placeChange\"], [1, \"places-view__list\"], [3, \"places\", \"edit\", \"remove\"]], template: function PlacesViewComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"app-gm-autocomplete\", 2);\n        i0.ɵɵlistener(\"placeChange\", function PlacesViewComponent_Template_app_gm_autocomplete_placeChange_2_listener($event) { return ctx.handlePlace($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"app-places-list\", 4);\n        i0.ɵɵlistener(\"edit\", function PlacesViewComponent_Template_app_places_list_edit_4_listener($event) { return ctx.editPlace($event); })(\"remove\", function PlacesViewComponent_Template_app_places_list_remove_4_listener($event) { return ctx.removeItems($event); });\n        i0.ɵɵpipe(5, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        let tmp_0_0;\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"places\", (tmp_0_0 = i0.ɵɵpipeBind1(5, 1, ctx.$places)) !== null && tmp_0_0 !== undefined ? tmp_0_0 : i0.ɵɵpureFunction0(3, _c0));\n    } }, directives: [i4.GmAutocompleteComponent, i5.PlacesListComponent], pipes: [i6.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwbGFjZXMtdmlldy5jb21wb25lbnQuc2NzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}